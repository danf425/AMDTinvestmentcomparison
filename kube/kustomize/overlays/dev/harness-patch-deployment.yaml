apiVersion: apps/v1
kind: Deployment
metadata:
  name: <+pipeline.stages.DeployDEV.variables.app_label>
spec:
  selector:
    matchLabels:
      app: <+pipeline.stages.DeployDEV.variables.app_label>
  replicas: 2
  template:
    spec:
      containers:
        - name: <+pipeline.stages.DeployDEV.variables.app_label>
          image: <+pipeline.stages.Build.spec.execution.steps.Build_and_Push_Image["artifact-Build_and_Push_Image"].stepArtifacts.publishedImageArtifacts[0].imageName>:<+pipeline.stages.Build.spec.execution.steps.Build_and_Push_Image["artifact-Build_and_Push_Image"].stepArtifacts.publishedImageArtifacts[0].tag>@<+pipeline.stages.Build.spec.execution.steps.Build_and_Push_Image["artifact-Build_and_Push_Image"].stepArtifacts.publishedImageArtifacts[0].digest>
          env:
            - name: INFO_KUBE_ENV
              value: <+pipeline.stages.DeployDEV.variables.env>
            - name: INFO_KUBE_CLUSTER
              value: <+pipeline.stages.DeployDEV.variables.cluster>
            - name: INFO_KUBE_IMAGE
              value: <+pipeline.stages.Build.spec.execution.steps.Build_and_Push_Image["artifact-Build_and_Push_Image"].stepArtifacts.publishedImageArtifacts[0].imageName>:<+pipeline.stages.Build.spec.execution.steps.Build_and_Push_Image["artifact-Build_and_Push_Image"].stepArtifacts.publishedImageArtifacts[0].tag>@<+pipeline.stages.Build.spec.execution.steps.Build_and_Push_Image["artifact-Build_and_Push_Image"].stepArtifacts.publishedImageArtifacts[0].digest>